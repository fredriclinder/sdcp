 create database sdcp;
create user 'sdcp'@'localhost' identified by 'sdcp';
grant all on sdcp.* to 'sdcp';
use sdcp;

DROP TABLE IF EXISTS `consoles`;
CREATE TABLE `consoles` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `device_id` int(10) unsigned DEFAULT NULL,
  `name` varchar(20) DEFAULT NULL,
  `ip` int(10) unsigned DEFAULT 2130706433,
  PRIMARY KEY (`id`),
  UNIQUE KEY `ip` (`ip`)
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=latin1;

DROP TABLE IF EXISTS `pdus`;
CREATE TABLE `pdus` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `device_id` int(10) unsigned DEFAULT NULL,
  `name` varchar(20) DEFAULT NULL,
  `ip` int(10) unsigned DEFAULT 2130706433,
  `0_slot_name` varchar(10) NOT NULL DEFAULT 'unknown',
  `1_slot_name` varchar(10) NOT NULL DEFAULT 'unknown',
  `0_slot_id` tinyint(3) unsigned NOT NULL DEFAULT 0,
  `1_slot_id` tinyint(3) unsigned NOT NULL DEFAULT 1,
  `slots` tinyint(1) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  UNIQUE KEY `ip` (`ip`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=latin1;
                  
DROP TABLE IF EXISTS `racks`;
CREATE TABLE `racks` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(20) DEFAULT NULL,
  `size` int(10) unsigned DEFAULT NULL,
  `fk_console` int(10) unsigned DEFAULT NULL,
  `fk_pdu_1` int(10) unsigned DEFAULT NULL,
  `fk_pdu_2` int(10) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `name` (`name`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=latin1;

DROP TABLE IF EXISTS `domains`;
CREATE TABLE `domains` (
  `id` int(10) unsigned NOT NULL,
  `name` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `name` (`name`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=latin1;

DROP TABLE IF EXISTS `subnets`; 
CREATE TABLE `subnets` (
  `id` int(10) unsigned NOT NULL,
  `subnet` int(10) unsigned NOT NULL,
  `mask` tinyint(3) unsigned NOT NULL DEFAULT 24,
  `subnet_description` text DEFAULT NULL,
  `section_id` int(10) unsigned NOT NULL,
  `section_name` varchar(20) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=latin1;

DROP TABLE IF EXISTS `devices`;
CREATE TABLE `devices` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `ip` int(10) unsigned NOT NULL,
  `mac` bigint(20) unsigned DEFAULT 0,
  `console_id` int(10) unsigned DEFAULT 0,
  `consoleport` int(10) unsigned DEFAULT NULL,
  `dns_a_id` int(10) unsigned DEFAULT 0,
  `dns_ptr_id` int(10) unsigned DEFAULT 0,
  `hostname` varchar(20) DEFAULT NULL,
  `domain` varchar(20) DEFAULT NULL,
  `fqdn` varchar(40) DEFAULT NULL,
  `graphed` varchar(3) DEFAULT 'no',
  `ipam_id` int(10) unsigned DEFAULT 0,
  `ipam_mask` tinyint(3) unsigned DEFAULT 24,
  `ipam_sub` int(10) unsigned DEFAULT 0,
  `model` varchar(20) DEFAULT NULL,
  `pem0_pdu_id` int(10) unsigned DEFAULT 0,
  `pem0_pdu_unit` tinyint(3) unsigned DEFAULT 0,
  `pem0_pdu_slot` tinyint(3) unsigned DEFAULT 0,
  `pem1_pdu_id` int(10) unsigned DEFAULT 0,
  `pem1_pdu_unit` tinyint(3) unsigned DEFAULT 0,
  `pem1_pdu_slot` tinyint(3) unsigned DEFAULT 0,
  `rack_id` int(10) unsigned DEFAULT 0,
  `rack_unit` tinyint(3) DEFAULT 0,
  `rack_size` tinyint(3) DEFAULT 1,
  `type` varchar(20),
  `snmp` varchar(20),
  PRIMARY KEY (`id`),
  UNIQUE KEY `ip` (`ip`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
